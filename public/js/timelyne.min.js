var timelyne=function(a){"use strict";function b(){var a=document.getElementById(tlPhaseDev),b=document.getElementById(tlPhaseReview),c=document.getElementById(tlPhaseTest);a.style.width=100*(tlLengthDev/tlDiff)+"%",a.style.backgroundColor=tlHexDev,b.style.width=100*(tlLengthReview/tlDiff)+"%",b.style.backgroundColor=tlHexReview,c.style.width=100*(tlLengthTest/tlDiff)+"%",c.style.backgroundColor=tlHexTest,console.log("TIMELYNE: initilizePhases")}var c=this;this._lines=[],this._fps=16.667,this._second=1e3,this._minute=60*second,this._hour=60*minute,this._day=24*hour,tlStart=a.start,tlEnd=a.end,tlDiff=tlEnd-tlStart,tlProgressBar=document.getElementById("tl-test-01").children[1],tlProgressFull=tlProgressBar.children[0],tlProgressLabel=tlProgressFull.children[0],tlPhaseDev="tl-phase-dev",tlPhaseReview="tl-phase-review",tlPhaseTest="tl-phase-test",tlThreshholdDev=tlLengthDev/tlDiff,tlThreshholdReview=tlThreshholdDev+tlLengthReview/tlDiff,tlThreshholdTest=tlThreshholdDev+tlThreshholdReview+tlLengthTest/tlDiff,this._test={color:a.test.color||"#E7322E",length:a.test.length||3*this._day},this._review={color:a.review.color||"#B0B000",length:a.review.length||1*this._day},this._development={color:a.development.color||"#178DE3",length:a.development.length||0},this.buildLines=function(a){function b(a){c._lines.push(a)}a.forEach(b),console.log("TIMELYNE: buildLines")},this.findPhase=function(a){return console.log("HELPER: findPhase"),tlThreshholdDev>a?tlHexDev:tlThreshholdReview>a?tlHexReview:tlThreshholdTest>a?tlHexTest:void 0},this.formatDate=function(a){var b,c,d,e;return b=Math.floor(a/day),a-=b*day,c=Math.floor(a/hour),a-=c*hour,d=Math.floor(a/minute),a-=d*minute,e=Math.floor(a/second),a-=e*second,console.log("HELPER: formatDate"),leadingZero(b)+":"+leadingZero(c)+":"+leadingZero(d)+":"+leadingZero(e)},this.addLeadingZero=function(a){return console.log("HELPER: addLeadingZero"),10>a?"0"+a:a},b(),this.buildLines(a.data),setInterval(this.update,this._fps)};timelyne.prototype.update=function(){"use strict";var a=Date.now(),b=tlEnd-a,c=a-tlStart;tlProgressLabel.innerHTML=dateFormatter(b)+" <span class='tl-progress-fin'></span>",tlProgressLabel.style.backgroundColor=calculatePhase(c/tlDiff),tlProgressLabel.children[0].style.borderTopColor=calculatePhase(c/tlDiff),tlProgressFull.style.width=100*(c/tlDiff)+"%"};var opts={defaults:{development:{color:"#178DE3"},review:{color:"#B0B000",length:"1 day"},test:{color:"#E7322E",length:"3 day"}},data:[{title:"Milestone 1",start:"Sep 01, 2013 08:00",end:"Sep 29, 2013 18:00"},{title:"Milestone 2",start:"Sep 08, 2013 08:00",end:"Sep 29, 2013 18:00"},{title:"Milestone 3",start:"Sep 16, 2013 08:00",end:"Sep 29, 2013 18:00"}]};window.timelyne=window.timelyne||new timelyne(opts);