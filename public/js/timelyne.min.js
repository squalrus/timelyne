var Timelyne=function(a){"use strict";function b(a){function b(a){var b=new Date(a.start),d=new Date(a.end),f=d-b,g=q.duration,i=r.duration,j=f-g-i,k=j/f,l=k+i/f,m=l+g/f;h.push({id:"tl-milestone-"+e(c),start:+b,end:+d,duration:f,title:a.title,dev:{duration:j,limit:k},review:{duration:i,limit:l},test:{duration:g,limit:m}}),c++}var c=1;a.forEach(b),console.log("TIMELYNE: buildLines")}function c(a){return console.log("HELPER: findPhase"),tlThreshholdDev>a?s.color:tlThreshholdReview>a?r.color:tlThreshholdTest>a?q.color:void 0}function d(a){var b,c,d,f;return b=Math.floor(a/m),a-=b*m,c=Math.floor(a/l),a-=c*l,d=Math.floor(a/k),a-=d*k,f=Math.floor(a/j),a-=f*j,console.log("HELPER: formatDate"),e(b)+":"+e(c)+":"+e(d)+":"+e(f)}function e(a){return console.log("HELPER: addLeadingZero"),10>a?"0"+a:a}function f(){var a=document.getElementById(tlPhaseDevelopment.class),b=document.getElementById(tlPhaseReview.class),c=document.getElementById(tlPhaseTest.class),d=document.getElementById("tl-label");d.innerText=tlTitle,a.style.width=100*(tlPhaseDevelopment.length/tlDiff)+"%",a.style.backgroundColor=s.color,b.style.width=100*(tlPhaseReview.length/tlDiff)+"%",b.style.backgroundColor=r.color,c.style.width=100*(tlPhaseTest.length/tlDiff)+"%",c.style.backgroundColor=q.color,console.log("TIMELYNE: initilizePhases")}function g(){var a=Date.now(),b=tlEnd-a,e=a-tlStart;p.innerHTML=d(b)+" <span class='tl-progress-fin'></span>",p.style.backgroundColor=c(e/tlDiff),p.children[0].style.borderTopColor=c(e/tlDiff),o.style.width=100*(e/tlDiff)+"%"}var h=[],i=16.667,j=1e3,k=60*j,l=60*k,m=24*l,n=document.getElementById("tl-test-01").children[1],o=n.children[0],p=o.children[0],q={"class":"tl-phase-test",color:a.defaults.test.color||"#e7322e",duration:a.defaults.test.length||3*m},r={"class":"tl-phase-review",color:a.defaults.review.color||"#b0b000",duration:a.defaults.review.length||1*m},s={"class":"tl-phase-dev",color:a.defaults.development.color||"#178de3",duration:a.defaults.development.length||0};b(a.data),f(),setInterval(g,i)},opts={defaults:{development:{color:"#178de3"},review:{color:"#b0b000"},test:{color:"#e7322e"}},data:[{title:"Milestone 1",start:"Oct 22, 2013 08:00",end:"Oct 31, 2013 18:00"},{title:"Milestone 2",start:"Sep 08, 2013 08:00",end:"Oct 31, 2013 18:00"},{title:"Milestone 3",start:"Sep 16, 2013 08:00",end:"Oct 31, 2013 18:00"}]};window.Timelyne=new Timelyne(opts);